(this.webpackJsonpbotsite=this.webpackJsonpbotsite||[]).push([[0],{25:function(e,t,n){},26:function(e,t,n){},28:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(0),s=n.n(c),r=n(18),o=n.n(r),i=(n(25),n.p,n(26),n(2));function u(){}var j=Object(c.createContext)({token:null,login:u,logout:u,isAuth:!1}),l=n(4),b=n.n(l),p=n(10),h=n(5),d=function(){var e=Object(p.a)(b.a.mark((function e(t){var n,a,c,s=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},a="http://botclientapi.dobbikov.ga".concat(t),e.next=4,fetch(a,n);case 4:return c=e.sent,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=(n(28),function(){var e=Object(c.useContext)(j),t=e.isAuth,n=e.login,s=Object(c.useState)(""),r=Object(h.a)(s,2),o=r[0],u=r[1],l=Object(c.useState)(""),O=Object(h.a)(l,2),f=O[0],x=O[1],m=Object(c.useState)(""),v=Object(h.a)(m,2),g=v[0],k=v[1],y=function(){var e=Object(p.a)(b.a.mark((function e(t){var a,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d("/api/Users/Auth",{method:"POST",body:JSON.stringify({Username:o,Password:f}),headers:{Accept:"application/json","Content-Type":"application/json"}});case 2:return a=e.sent,e.next=5,a.json();case 5:c=e.sent,!0===a.ok?n(c.acces_token):k("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c.");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return!0===t?Object(a.jsx)(i.a,{to:"/chats"}):Object(a.jsx)("div",{className:"pages",children:Object(a.jsxs)("div",{className:"auth-window",children:[Object(a.jsx)("p",{style:{color:"red"},children:g}),Object(a.jsx)("p",{children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d:"}),Object(a.jsx)("input",{type:"text",name:"login",onChange:function(e){u(e.target.value)},value:o}),Object(a.jsx)("p",{children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c:"}),Object(a.jsx)("input",{type:"password",name:"password",onChange:function(e){x(e.target.value)},value:f}),Object(a.jsx)("button",{onClick:y,children:"Authorize"})]})})}),f=n(9),x=(n(34),function(){var e=Object(c.useState)(!1),t=Object(h.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)([]),o=Object(h.a)(r,2),i=o[0],u=o[1];return Object(c.useEffect)(Object(p.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d("/api/Chats",{method:"GET",headers:{"Content-Types":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,!0===t.ok&&(s(!0),u(n));case 7:case"end":return e.stop()}}),e)}))),[]),0==n?Object(a.jsx)("h1",{className:"loading",children:"Loading..."}):Object(a.jsx)("div",{className:"pages",children:Object(a.jsx)("div",{className:"container",children:i.map((function(e){return Object(a.jsx)(f.b,{to:"/chat/".concat(e.telegramid),className:"chat",children:Object(a.jsxs)("p",{children:[e.telegramid<0?e.username:""," ",e.firstname," ",e.lastname]})},e.id)}))})})}),m=(n(35),function(){var e=Object(c.useState)(!1),t=Object(h.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)([]),o=Object(h.a)(r,2),u=o[0],j=o[1],l=Object(c.useState)(""),O=Object(h.a)(l,2),f=O[0],x=O[1],m=Object(i.f)().id,v=function(){var e=Object(p.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d("/api/Messages/ByChatId/".concat(m),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,!0===t.ok&&(s(!0),j(n));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(p.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d("/api/Messages",{method:"POST",body:JSON.stringify({Telegramchatid:Number(m),Text:f,Telegramuserid:1495033650}),headers:{"Content-Type":"application/json"}});case 2:return n=e.sent,e.next=5,n.json();case 5:if(e.sent,!0!==n.ok){e.next=9;break}return e.next=9,v();case 9:x("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)(Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:case"end":return e.stop()}}),e)}))),[]),!1===n?Object(a.jsx)("h1",{children:"Loading..."}):Object(a.jsx)("div",{className:"pages",children:Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)("div",{className:"messages",children:u.map((function(e){return Object(a.jsxs)("div",{className:1495033650===e.telegramuserid?"you mess":"not-you mess",children:[Object(a.jsxs)("p",{className:"names",children:[e.firstname," ",e.lastname]}),Object(a.jsx)("p",{children:e.text})]},e.id)}))}),Object(a.jsxs)("div",{className:"inputs",children:[Object(a.jsx)("input",{type:"text",onChange:function(e){x(e.target.value)},value:f,className:"inputs-mess"}),Object(a.jsx)("input",{type:"submit",value:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c",className:"inputs-submit",onClick:g})]})]})})}),v="userData",g=(n(36),function(){var e=Object(c.useContext)(j),t=e.isAuth,n=e.logout;return!1===t?null:Object(a.jsxs)("header",{children:[Object(a.jsx)(f.b,{to:"/chats",className:"link",children:"\u0427\u0430\u0442\u044b"}),Object(a.jsx)(f.b,{onClick:n,children:"\u0412\u044b\u0439\u0442\u0438"})]})});var k=function(){var e=function(){var e=Object(c.useContext)(j).isAuth;return Object(a.jsxs)(a.Fragment,{children:[0==e?Object(a.jsx)(i.a,{to:"/auth"}):Object(a.jsx)(i.a,{to:"/chats"}),Object(a.jsx)(i.b,{path:"/auth",component:O}),Object(a.jsx)(i.b,{path:"/chats",component:x}),Object(a.jsx)(i.b,{path:"/chat/:id",component:m})]})}(),t=function(){var e=Object(c.useState)(null),t=Object(h.a)(e,2),n=t[0],a=t[1],s=Object(c.useCallback)((function(e){a(e),localStorage.setItem(v,JSON.stringify({token:e}))}),[]),r=Object(c.useCallback)((function(){a(null),localStorage.removeItem(v)}),[]);return Object(c.useEffect)((function(){var e=JSON.parse(localStorage.getItem(v));e&&e.token&&s(e.token)}),[s]),{login:s,logout:r,token:n}}(),n=t.token,s=t.login,r=t.logout,o=!!n;return Object(a.jsx)(j.Provider,{value:{login:s,logout:r,token:n,isAuth:o},children:Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(g,{}),e]})})},y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,38)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),s(e),r(e)}))},C=document.getElementById("root");o.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(f.a,{children:Object(a.jsx)(k,{})})}),C),y()}},[[37,1,2]]]);
//# sourceMappingURL=main.1824e8f3.chunk.js.map